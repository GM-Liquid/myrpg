@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');
/* Global styles */
.window-app {
  font-family: 'Roboto', sans-serif;
}

/* Rank colors -------------------------------------------------- */
:root {
  /* фоны не меняем */
  --rank1-bg: #c7e6b3;
  --rank2-bg: #f5a75a;
  --rank3-bg: #a5a9b4;
  --rank4-bg: #fcd75f;
  --rank5-bg: #87d0fb;

  /* новые рамки с контрастом ≈ 1.9 : 1 */
  --rank1-border: #6ab23b; /* контраст 1.91 */
  --rank2-border: #c96a0c; /* 1.90 */
  --rank3-border: #717788; /* 1.90 */
  --rank4-border: #c69804; /* 1.90 */
  --rank5-border: #0896e9; /* 1.90 */
}

.small-input {
  width: 100px;
  max-width: 150px;
}

/* unified appearance for key info inputs */
.key-info-input {
  width: 100%;
  box-sizing: border-box;
}

.key-info-grid .resource-content {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.key-info-input[readonly] {
  background-color: #f8f8f8;
  color: #1b1210;
}

.key-info-divider {
  border: 0;
  border-top: 2px solid #1b1210;
  margin: 4px 0;
}

.skill-row {
  display: flex;
  align-items: center;
  margin-bottom: 4px;
}

.skill-col {
  margin-right: 8px;
}

.skill-ability-abbr {
  width: 40px;
  text-align: center;
}

.skill-name {
  flex: 1;
  cursor: pointer;
}

.skill-value {
  width: 60px;
}

input[readonly],
textarea[readonly],
input[disabled],
textarea[disabled] {
  pointer-events: none;
  user-select: none;
  cursor: default;
  background-color: #f0f0f0;
  color: #666;
}

.features-tab {
  padding: 10px;
}

.attributes-table {
  margin: 0 auto;
}

.attributes-table th,
.attributes-table td {
  width: 90px;
  height: 45px;
  border: 2px solid #1b1210;
  text-align: center;
  padding: 5px !important;
}
.attributes-table thead th {
  background-color: #673e37;
  color: #d2d2c9;
  text-shadow: none;
}

.sheet-box h2 {
  text-align: center;
  font-weight: 700;
}

.center-attributes {
  display: flex;
  flex-direction: column; /* Ставим вертикально */
  align-items: center; /* По центру по горизонтали */
  justify-content: flex-start;
  gap: 10px; /* Чуть воздуха между таблицами */
}

.top-row {
  display: flex;
  flex-wrap: nowrap;
  gap: 6px;
  align-items: center !important;
  justify-content: center;
}

.col-50,
.col-50-last,
.col-33,
.col-33-last,
.col-25,
.col-25-last {
  box-sizing: border-box;
}

.col-50 {
  flex: 0 0 calc(50% - 10px);
  padding-right: 10px;
}

.col-50-last {
  flex: 0 0 50%;
  padding-right: 0;
}

.col-33 {
  flex: 0 0 33.33%;
  padding-right: 10px;
}

.col-33-last {
  flex: 0 0 33.33%;
  padding-right: 0;
}

/*     25% */
.col-25 {
  padding-right: 10px;
  flex: 0 0 calc(25% - 5px);
}

.col-25-last {
  flex: 0 0 calc(25% - 5px);
  padding-right: 0;
}

/* sheet-box -       */
.sheet-box {
  border: 2px solid #1b1210;
  padding: 10px;
  margin-bottom: 10px;
}

.myrpg.sheet.actor {
  background-color: #d2d2c9;
}

form textarea,
form input[type='text'],
form input[type='number'] {
  border: 2px solid #1b1210; /*            */
  background-color: #f8f8f8; /*                                         */
  color: #1b1210; /*                          */
  font-family: inherit;
  font-size: inherit;
  padding: 5px;
  width: 100%;
  box-sizing: border-box;
}

.myrpg .biography .form-group {
  margin-bottom: 5px;
}

.myrpg .abilities .ability {
  margin-bottom: 5px;
}

.myrpg .skills .skill {
  margin-bottom: 5px;
}

/* layout skills into two columns */
.skills-grid {
  column-count: 2;
  column-gap: 10px;
}

.skills-grid .skill-row {
  break-inside: avoid;
}

/*         resizable   textarea */
form textarea {
  resize: none;
  overflow: hidden;
  min-height: 60px;
  max-height: 500px;
}

/*                    */
.portrait {
  width: auto;
  margin-right: 10px;
}

.profile-img {
  display: block;
  max-width: 194px;
  max-height: 194px;
  width: auto !important;
  height: auto !important;
  border: 2px solid #1b1210; /* та же толщина и цвет */
  box-sizing: border-box; /* чтобы рамка не «режала» картинку */
}

.rollable:hover,
.rollable:focus {
  color: #000;
  text-shadow: 0 0 10px red;
  cursor: pointer;
}

td.col-name:hover {
  color: #000;
  text-shadow: 0 0 10px red;
  cursor: pointer;
}

.sub-labels {
  margin-bottom: 3px;
}

/* ability tooltip removed */

/*                      */
.myrpg .abilities-table {
  width: 100%;
  border-collapse: collapse !important;
  margin-bottom: 1em;
  background: none !important;
}

.myrpg .abilities-table th,
.myrpg .abilities-table td {
  border: 1px solid #1b1210 !important;
  padding: 5px;
  text-align: center;
}

.myrpg .abilities-table thead th {
  background-color: #673e37 !important;
  color: #d2d2c9 !important;
  text-shadow: none !important;
}

.myrpg .abilities-table th.primary-header {
  font-size: 1.2em;
  font-weight: bold;
}

.myrpg
  .abilities-table
  tr:nth-child(even):not(.ability-effect-row):not(.mod-effect-row):not(.inventory-effect-row):not(
    .armor-effect-row
  ) {
  background-color: #c1b1aa !important;
}

.abilities-table .effect-wrapper {
  white-space: pre-wrap;
}

.abilities-table .ability-effect-row,
.abilities-table .mod-effect-row,
.abilities-table .inventory-effect-row,
.abilities-table .armor-effect-row {
  display: none;
}

.abilities-table tr.expanded + .ability-effect-row,
.abilities-table tr.expanded + .mod-effect-row,
.abilities-table tr.expanded + .inventory-effect-row,
.abilities-table tr.expanded + .armor-effect-row {
  display: table-row;
}

/* Also support explicit open state to avoid edge-cases for the last row */
.abilities-table .ability-effect-row.open,
.abilities-table .mod-effect-row.open,
.abilities-table .inventory-effect-row.open,
.abilities-table .armor-effect-row.open {
  display: table-row;
}

.tab.abilities table.abilities-table {
  table-layout: fixed;
  width: 100%;
}

.tab.abilities table.abilities-table:not(.abilities-table--unity) th.col-name {
  width: 34% !important;
}

.tab.abilities table.abilities-table:not(.abilities-table--unity) th.col-rank {
  width: 14% !important;
}

.tab.abilities table.abilities-table:not(.abilities-table--unity) th.col-upg1,
.tab.abilities table.abilities-table:not(.abilities-table--unity) th.col-upg2 {
  width: 21% !important;
}

.tab.abilities table.abilities-table:not(.abilities-table--unity) th.col-delete {
  width: 10% !important;
}

.tab.abilities table.abilities-table.abilities-table--unity th.col-name {
  width: 28% !important;
}

.tab.abilities table.abilities-table.abilities-table--unity th.col-rank {
  width: 12% !important;
}

.tab.abilities table.abilities-table.abilities-table--unity th.col-type {
  width: 16% !important;
}

.tab.abilities table.abilities-table.abilities-table--unity th.col-upg1,
.tab.abilities table.abilities-table.abilities-table--unity th.col-upg2 {
  width: 18% !important;
}

.tab.abilities table.abilities-table.abilities-table--unity th.col-delete {
  width: 8% !important;
}

.mods-section {
  margin-top: 50px;
}

.abilities-table td.col-delete a {
  display: inline-block;
  margin: 0 6px;
  white-space: nowrap;
}

/* Bold text for table cells except effect rows */
.abilities-table th,
.abilities-table td:not(.col-effect) {
  font-weight: 700;
}

/* Align first column to the left */
.abilities-table th.col-name,
.abilities-table td.col-name {
  text-align: left;
}

.abilities-table td.col-cost a {
  display: inline-block;
  margin: 0 4px;
  white-space: nowrap;
}

.abilities-table td.col-cost .quantity-value {
  display: inline-block;
  width: 2ch;
  text-align: center;
}

.tab.inventory table.abilities-table {
  width: 100%;
  table-layout: fixed;
}

.tab.inventory table.abilities-table th.col-name {
  width: 72%;
}

.tab.inventory table.abilities-table th.col-cost {
  width: 12%;
}

.tab.inventory table.abilities-table th.col-delete {
  width: 16%;
}

.tab.inventory table.armor-table th.col-name {
  width: 60%;
}

.tab.inventory table.armor-table th.col-equip {
  width: 12%;
}

.tab.inventory table.armor-table th.col-cost {
  width: 12%;
}

.tab.inventory table.armor-table th.col-delete {
  width: 16%;
}

.myrpg.sheet.actor form {
  position: relative;
  width: 100%;
  height: 100%;
  margin: 0;
  box-sizing: border-box;
}

.sheet-scrollable {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  box-sizing: border-box;
}

.sheet-tabs-hex {
  position: absolute;
  right: -240px;
  top: 15%;
  transform: translateY(-50%);
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.hex-button {
  background: #d2d2c9;
  color: #1b1210;
  border: 2px solid #1b1210;
  font-weight: bold;
  cursor: pointer;
  border-radius: 6px;
  width: 220px;
  height: 40px;
  transition: background 0.3s;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
}

.hex-button.active {
  background: #673e37;
  color: #d2d2c9;
}

.window-app.myrpg-hex-tabs,
.window-app.myrpg-hex-tabs .window-content {
  overflow: visible !important;
}

.grid,
.grid-2col {
  display: grid;
  grid-column: span 2 / span 2;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin: 10px 0;
  padding: 0;
}

.grid-3col {
  grid-column: span 3 / span 3;
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.grid-6col {
  grid-column: span 6 / span 6;
  grid-template-columns: repeat(6, minmax(0, 1fr));
}

.flexrow {
  align-items: flex-start;
}

.myrpg.sheet.actor::-webkit-scrollbar {
  width: 12px;
}

.myrpg.sheet.actor::-webkit-scrollbar-track {
  background: #d2d2c9;
}

.myrpg.sheet.actor::-webkit-scrollbar-thumb {
  background-color: #6d031c;
  border: 2px solid #d2d2c9;
  border-radius: 6px;
}

.tab.biography h1,
.tab.biography h2,
.tab.abilities h1,
.tab.abilities h2 {
  text-align: center; /*                      */
  font-weight: 700; /*                     */
}

.sheet-box .form-group label,
.sheet-box .resource-label,
.sheet-box .armor-description label,
.sheet-box .armor-values label {
  text-align: center; /*                  */
}

.resource,
.resource .resource-label,
.resource .sub-label,
.resource .resource-content {
  text-align: center;
}

.resource input {
  text-align: center;
}

/*******************************************************
  2)                                        
     (        .resource,                      (1)               )
 *******************************************************/
/*                           ,      Foundry           : */
/*******************************************************
  3)                              (label)             
                 ,                         input/textarea
 *******************************************************/
.tab.biography .form-group label {
  text-align: center;
  display: block;
}

.tab.biography .form-group input,
.tab.biography .form-group textarea {
  text-align: center;
}

/*******************************************************
  4)                                          
 *******************************************************/
.armor-description,
.armor-description label,
.armor-description textarea {
  text-align: center;
}

/*******************************************************
  5) (      )                   (h2/h3)            
                                      
 *******************************************************/

.limited-height {
  height: 280px;
  overflow-y: auto;
}

.armor-description textarea {
  height: 130px;
  resize: vertical;
}

/* armor bonuses layout */
.armor-values {
  gap: 8px;
  margin-top: 8px;
}
.armor-values .flexcol input {
  width: 80%;
}

/*                                             */
.myrpg.sheet.actor form input[type='text'],
.myrpg.sheet.actor form input[type='number'],
.myrpg.sheet.actor form textarea {
  text-align: center;
}

/*                          (header)                        */
.window-app.myrpg .window-header {
  background-color: #673e37 !important; /*                        */
  opacity: 1 !important;
}

/*                                            */
.window-app.myrpg .window-header .window-title {
  color: #ffffff !important; /*                        */
}

/* 1)                   (                                               ) */
.window-app.myrpg.dialog {
  background: #d2d2c9 !important; /*        ,                         */
  opacity: 1 !important;
  filter: none !important;
}

/* 2)                (     )         */
.window-app.myrpg.dialog .window-header {
  background-color: #6d031c !important; /*                   */
  background-image: none !important; /*                   Foundry */
  opacity: 1 !important; /*                      */
  filter: none !important;
}

/* 3)           (     )          "Close" */
.window-app.myrpg.dialog .window-header .window-title,
.window-app.myrpg.dialog .window-header .close {
  color: #ffffff !important; /*             */
  text-shadow: none !important; /*             ,               */
  opacity: 1 !important;
}
/* ---                                     TinyMCE (Foundry V10+),                         .tox-... --- */

/*                             */
.myrpg .tox-tinymce,
.window-app.dialog .tox-tinymce {
  border: 2px solid #1b1210;
  background-color: #f8f8f8;
  color: #1b1210;
  font-family: inherit;
  font-size: inherit;
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  width: 100%;
}

/*                 ,                               */
.myrpg .tox-tinymce .tox-editor-container {
  background-color: #f8f8f8;
  border: none;
  min-height: 60px;
  box-sizing: border-box;
  padding: 0;
}

/*     iframe,                                 */
.myrpg .tox-tinymce .tox-edit-area__iframe {
  background-color: #f8f8f8;
  padding: 0;
}

/*                ,                  .myrpg (              <input>   <textarea>) */
.myrpg .tox-tinymce * {
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  color: #1b1210;
}

/* ---             --- */

.window-app.dialog .form-group {
  display: flex;
  align-items: center;
  margin-bottom: 10px;
}

.window-app.dialog .form-group label {
  flex: 1;
  margin-right: 10px;
}

.window-app.dialog .form-group input[type='text'],
.window-app.dialog .form-group input[type='number'],
.window-app.dialog .form-group textarea {
  width: 250px;
  box-sizing: border-box;
}

/* --- Top-row columns 1/3 | 2/3 --- */
/* --- Центрируем портрет внутри своей колонки --- */
.top-row .portrait-col {
  flex: 0 0 33% !important;
  /* делаем колонку flex-контейнером */
  display: flex;
  justify-content: center; /* по горизонтали */
  align-items: center; /* по вертикали (на случай высоких портретов) */
}

/* --- таблица-подсказка рангов (тот же вид, что и .attributes-table) --- */
.rank-hint-table {
  margin: 0 auto; /* как у таблицы характеристик */
  border-collapse: collapse;
}

.rank-hint-table th,
.rank-hint-table td {
  width: 90px; /* 1 в 1 с  .attributes-table */
  height: 45px;
  border: 2px solid #1b1210;
  text-align: center;
  padding: 5px;
}

.rank-hint-table th {
  /* хотим оставить цветную «шапку» */
  background: #673e37;
  color: #d2d2c9;
  font-weight: 700;
}

table {
  margin: 0em 0 !important;
}

section.abilities-section {
  margin-top: 20px;
}

/* Rank coloring -------------------------------------------------- */
.rank1 {
  --rank-bg: var(--rank1-bg);
  --rank-border: var(--rank1-border);
  color: var(--rank1-border);
}
.rank2 {
  --rank-bg: var(--rank2-bg);
  --rank-border: var(--rank2-border);
  color: var(--rank2-border);
}
.rank3 {
  --rank-bg: var(--rank3-bg);
  --rank-border: var(--rank3-border);
  color: var(--rank3-border);
}
.rank4 {
  --rank-bg: var(--rank4-bg);
  --rank-border: var(--rank4-border);
  color: var(--rank4-border);
}
.rank5 {
  --rank-bg: var(--rank5-bg);
  --rank-border: var(--rank5-border);
  color: var(--rank5-border);
}

input.rank1,
input.rank2,
input.rank3,
input.rank4,
input.rank5 {
  background-color: var(--rank-bg) !important;
  border-color: var(--rank-border) !important;
  color: #000;
}

.skill-name.rank1,
.skill-name.rank2,
.skill-name.rank3,
.skill-name.rank4,
.skill-name.rank5 {
  background-color: var(--rank-bg);
  border-color: var(--rank-border);
  color: #000;
}

.rank-hint-table td.rank1,
.rank-hint-table td.rank2,
.rank-hint-table td.rank3,
.rank-hint-table td.rank4,
.rank-hint-table td.rank5 {
  background-color: var(--rank-bg);
  color: #1b1210;
}

.rune-size {
  margin-bottom: 10px;
  text-align: center;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: 700;
  font-size: 1.1em;
}

.rune-size input {
  width: 2.5em !important;
  text-align: center;
    margin-left: 5px;
    margin-right: 5px;
}

.rune-size .divider {
  font-weight: bold;
  margin: 0 0.2em;
}
